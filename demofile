second code for client
third code 
and forth code for revert